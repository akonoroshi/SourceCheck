snapshot {
    stage:Stage {
        @anything
    }
    customBlock:`Move Ship` {
        script {
            doForever(script {
                @defBlock ACCEL {
                    @anyOrder {
                        accelerate
                        doWearNextCostume
                    }
                }
                @anyOrder {
                    @or {
                        doIfElse(reportKeyPressed(literal:`up arrow`), script {
                            @block ACCEL
                        }, script {
                            doSwitchToCostume(literal:rocket)
                        })
                        @inline {
                            doIf(reportKeyPressed(literal:`up arrow`), script {
                                @block ACCEL
                            })
                            doIf(reportNot(reportKeyPressed(literal:`up arrow`)), script {
                                doSwitchToCostume(literal:rocket)
                            })
                        }
                    }
                    doIf(reportKeyPressed(literal:`right arrow`), script {
                        turn(literal:3)
                    })
                    doIf(reportKeyPressed(literal:`left arrow`), script {
                        turnLeft(literal:3)
                    })
                }
            })
        }
    }
    customBlock:`Wrap Around Screen` {
        script {
            @defBlock WRAP_X {
                @anyOrder {
                    doIf(reportLessThan(xPosition, literal:-261), script {
                        setXPosition(literal:260)
                    })
                    doIf(reportLessThan(literal:261, xPosition), script {
                        setXPosition(literal:-260)
                    })
                }
            }
            @defBlock WRAP_Y {
                @anyOrder {
                    doIf(reportLessThan(yPosition, literal:-181), script {
                        setYPosition(literal:180)
                    })
                    doIf(reportLessThan(literal:181, yPosition), script {
                        setYPosition(literal:-180)
                    })
                }
            }
            @or {
                @inline {
                    @block WRAP_X
                    @block WRAP_Y
                }
                @inline {
                    @block WRAP_Y
                    @block WRAP_X
                }
            }
        }
    }
    customBlock:`Create Asteroids %s` {
        script {
            doRepeat(var:`# of asteroids`, script {
                @anyOrder {
                    doIfElse(reportEquals(literal:1, reportRandom(literal:1, literal:2)), script {
                        setXPosition(reportRandom(literal:-200, literal:-50))
                    }, script {
                        setXPosition(reportRandom(literal:50, literal:200))
                    })
                    doIfElse(reportEquals(literal:1, reportRandom(literal:1, literal:2)), script {
                        setYPosition(reportRandom(literal:-160, literal:-50))
                    }, script {
                        setYPosition(reportRandom(literal:50, literal:160))
                    })
                }
                placeasteroid
            })
        }
        varDec:`# of asteroids`
    }
    customBlock:`Update Lives` {
        script {
            doDeclareVariables(list(varMenu:lives))
            @anyOrder {
                doSetVar(varMenu:lives, literal:3)
                showalllives
            }
            doForever(script {
                doIf(lifewaslost, script {
                    doChangeVar(varMenu:lives, literal:-1)
                })
                @defBlock LIFE_COMP {
                    @or {
                        reportLessThan(var:lives, literal)
                        reportEquals(literal, var:lives)
                    }
                }
                @or {
                    @anyOrder {
                        doIf(@block LIFE_COMP, script {
                            hidelife*_(literal:1)
                        })
                        doIf(@block LIFE_COMP, script {
                            hidelife*_(literal:2)
                        })
                        doIf(@block LIFE_COMP, script {
                            hidelife*_(literal:3)
                            endgame
                        })
                    }
                    doIfElse(@block LIFE_COMP, script {
                        hidelife*_(literal:1)
                    }, script {
                        doIfElse(@block LIFE_COMP, script {
                            hidelife*_(literal:2)
                        }, script {
                            hidelife*_(literal:3)
                            endgame
                        })
                    })
                }
            })
        }
    }
    customBlock:`Move Alien` {
        script {
            @anyOrder {
                gotoXY(literal:-240, literal:0)
                doDeclareVariables(list(varMenu:x))
                doSetVar(varMenu:x, literal:-240)
            }
            doRepeat(literal:12, script {
                doChangeVar(varMenu:x, literal:50)
                doGlide(literal:1, var:x, reportRandom(literal:-50, literal:50))
                @or {
                    doIf(reportEquals(literal:1, reportRandom(literal:1, literal:3)), script {
                        alienshoot
                    })
                    alienshoot
                }
            })
        }
    }
    varDec:`Level #`
    varDec:`# of Bullets`
    varDec:`# of Asteroids`
    varDec:Difficulty
    varDec:Score
    varDec:`Explosion x`
    varDec:`Explosion y`
    varDec:lives
    varDec:`Lives Array`
    varDec:`Game Over`
}