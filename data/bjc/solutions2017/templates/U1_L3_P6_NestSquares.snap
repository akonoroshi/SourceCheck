snapshot {
    stage {
        sprite {
            @anything
        }
    }
    customBlock {
        script {
            @anything
        }
        var
        var
        var
    }
    @optional {
        customBlock {
            script {
                evaluateCustomBlock(var, var, var)
            }
            var
            var
        }
    }
    customBlock {
        script {
            evaluateCustomBlock(var, var, literal)
        }
        var
        var
    }

    @optional {
        customBlock {
            @anything
        }
    }

    customBlock {
        @defVar (VAR_LENGTH) {
            script {
                for_*_to__(literal, literal, var, script {
                    evaluateCustomBlock(@anyOrder {
                        literal,
                        reportProduct(
                            @if (VAR_LENGTH) { var }
                            @unless (VAR_LENGTH) { literal }
                            var
                        )
                    })
                })
            }
            var
            @if (VAR_LENGTH) { var }
        }
    }
}